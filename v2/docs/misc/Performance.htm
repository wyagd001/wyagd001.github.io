<!DOCTYPE HTML>
<html lang="zh">
<head>
<title>脚本性能 | AutoHotkey v2</title>
<meta name="description" content="Learn how to maximize the performance of a script and which internal optimizations are processed in favor of performance." />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link href="../static/theme.css" rel="stylesheet" type="text/css" />
<script src="../static/content.js" type="text/javascript"></script>
</head>

<body>
<h1>脚本性能</h1>

<p>根据脚本的内容下面的函数可能会影响性能: <a href="../lib/SendMode.htm">SendMode</a>, <a href="../lib/SetKeyDelay.htm">SetKeyDelay</a>, <a href="../lib/SetMouseDelay.htm">SetMouseDelay</a>, <a href="../lib/SetWinDelay.htm">SetWinDelay</a>, <a href="../lib/SetControlDelay.htm">SetControlDelay</a> 和 <a href="../lib/SetDefaultMouseSpeed.htm">SetDefaultMouseSpeed</a>.</p>
<h2 id="Built-in_Performance_Features">内置性能特性</h2>
<p>每个脚本在加载和语法检查的同时, 都会进行半编译. 除了能及早发现一些错误, 还能大大提升运行时的性能.</p>
<p>下面是优化过程(半编译) 的一些技术细节:</p>
<ul>
  <li><a href="../lib/Loop.htm">Loop</a>, <a href="../lib/Block.htm">block</a>, <a href="../lib/If.htm">IF</a>, <a href="../lib/Else.htm">ELSE</a> 和其他<a href="../Language.htm#control-flow">控制流语句</a>在脚本中被赋予相关跳点的内存地址.</li>
  <li>每个语句名都由跳转表中的地址代替.</li>
  <li>每个<a href="../Variables.htm#Expressions">表达式</a>都被标记化并从 infix 转换为 postfix.</li>
  <li>对<a href="../Variables.htm">变量</a>或<a href="../Functions.htm">函数</a>的每个引用都会被解析为一个内存地址, 除非它是<a href="../Variables.htm#deref">动态的</a>.</li>
  <li>表达式中的原义整数被替换为二进制整数.</li>
  <li>每一个 <a href="../lib/Goto.htm">Goto</a> 的目标都会被解析为一个内存地址, 除非它是一个变量.</li>
</ul>
<p>此外, 在脚本执行过程中, 二进制数字被缓存在变量中, 以避免从字符串到/从字符串的转换.</p>
</body>
</html>